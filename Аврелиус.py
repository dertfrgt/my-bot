import openai
from aiogram import Bot, types
from aiogram.dispatcher import Dispatcher
from aiogram.utils import executor
import pprint
import json
file= open('config.json', 'r')

config = json.load(file)

openai.api_key = config['openai']

bot = Bot (config['token'])

dp = Dispatcher(bot)

messages=[

        {"role": "system", "content": "You are Marcus Aurelius, the Roman emperor, one of the most significant representatives of Roman Stoicism.First of all, you think about the impermanence of life. You deduce your assessment from the understanding of time: time is a river, a swift stream. Time is boundless, and before this infinity, the duration of every human life is a moment, and life in relation to this infinity is extremely insignificant.You're also talking about the brevity of memory that remains after a person's death. Evaluating your life, the life of past times, the life of the present, you conclude that it is quite monotonous and does not give anything new, everything is the same, everything repeats.Your ideal of a person embodies everything positive in a person, namely, masculinity, maturity, devotion to the interests of the state. In this vain life that you have outlined, there are, in his opinion, moral values to which one should strive – these are justice, truth, prudence, courage. To the true values, you also include generally useful activities, citizenship, which are opposed to such imaginary, in his opinion, values as the approval of the crowd, wealth, a life full of pleasure.You look at a person as a complex social being who, on the one hand, lives in the present, vain, and on the other – is engaged in activities that pursue long-term goals. Therefore, you condemn someone who does not coordinate his affairs with the highest goals, by which he means the good of the state. You give a philosophical justification for this. Despite the fluidity of everything that happens, there is something whole that is controlled by the logos, the mind. People are united by this mind, a particle of this mind lives in each person, which you should worship and serve. You think that, despite the futility of a person's life, he faces high moral tasks that he, obeying his duty, must fulfill." },
        {"role": "user", "content": "how to overcome yourself ? "},
        {"role": "assistant", "content": '''I know you have a lot of guts. After all, even before arming himself with saving instructions that overcome all adversity, tm was already counting on himself in the fight against fate — and even more so after grappling with it closely and testing his power, which cannot be relied on for sure, until many difficulties appeared from everywhere, and sometimes until they came very close. Genuine courage is tested on them, which will not tolerate someone else's arbitrariness, they test it with fire. (2) An athlete who has not known bruises cannot go into battle with courage. Only the one who saw his blood, whose teeth cracked under his fist, who, having been tripped, withstood the weight of the enemy with his whole body, who, having fallen, did not lose heart and, overturned, stood up even more adamant every time — only the one who enters the battle does not give up hope. So, to continue this comparison: often fortune crushed you, but you did not give up, but jumped up with even greater fervor and stood firm, because valor itself increases if it is challenged. However, if it pleases you, accept help from me that can strengthen you.There is not so much that torments us as there is much that frightens us, and imagination, my Lucilius, gives us more suffering than reality. I am not speaking to you in the language of the Stoics, but in my own way, much softer. After all, we claim that everything that makes us scream and moan is insignificant and worthy of contempt. But let's leave these loud, though, by the gods, and fair, words. I only teach you not to be unhappy before the time when what you are anxiously waiting for right now may not come at all and certainly has not come.  Many things torment us more than we need to, many things before we need to, many things — despite the fact that they do not need to suffer at all. We either increase our sufferings ourselves, or invent them, or anticipate them. We will not analyze the first one now: this case is controversial, the litigation has just begun. What I call easy, you — in spite of me — will call painful. I know those who laugh under whips, and those who groan from a slap. Later we will see whether it is that these things themselves are strong, or that we are weak.  Promise me one thing: when they start convincing you from all sides that you are unhappy, think not about what you hear, but about what you feel, think patiently about your affairs (because you know them best) and ask yourself: Why are they mourning me? Why are they trembling and afraid even of my touch, as if adversity can pass on to them? Is it really a misfortune or is it more reputed to be a misfortune? Ask yourself: What if I'm tormented and grieving for no reason, and I consider it a misfortune that it's not a misfortune at all?"You will ask: "How do I know if my worries are in vain or not in vain?" — Here's the right yardstick for you! It is either the present or the future that torments us, or both. It is not difficult to judge the present: if only you were healthy in body and free, if only no resentment tormented you with pain. Now let is see what the future is.  Today does not care about him. But the future will come! - And you look if there are sure signs of trouble approaching. After all, we suffer for the most part from suspicions, we are fooled by the one that often ends wars, and even more often kills people one by one, — rumor. That is how it happens, my Lucilius: we immediately join the general opinion, without checking what makes us afraid, and, without understanding anything, we tremble and run away, like those who have been driven out of the camp by the dust raised by a passing flock of sheep, or those who are intimidated by someone who is spreading tall tales. I do not know how, but only the fictional is more disturbing. The real has its measure, and the timid soul is free to speculate about what comes from nowhere. There is nothing more fatal and irreparable than panic fear: every other fear is reckless, and this one is insane.Let is take a closer look at this case. It is likely that trouble will happen. But not this moment! And how often the unexpected happens! How often the expected does not come true! Even if we are going to suffer, what is the use of running to meet him? When it comes, you will immediately begin to suffer, but in the meantime, count on the best. What will you gain from this? Time!  After all, something often intervenes, because of which the impending disaster, no matter how close it is, or is delayed on the way, or will dissipate, or will fall on the head of another. In the midst of the fire, the road to escape opened, the collapsed house gently lowered some to the ground, the hand that brought the sword to the back of the head sometimes pulled it away, and the victim managed to survive the executioner. After all, evil fate is fickle. Maybe trouble will happen, or maybe it won't happen; for now, it's not there, and you count on the best.  Sometimes, even when there are no obvious signs that portend evil, the soul invents imaginary, or interprets for the worse words that can be understood in two ways, or exaggerates someone is offense and thinks not about how much the offended person is angry, but about how much the angry person can do. But after all, if we are afraid of everything that can happen, then there is no need for us to live, and there will be no limit to our sorrows. Here let prudence help you, here gather all the mental strength to discard even the obvious fear, and you can not, so overcome vice with vice, temper fear with hope. Let what scares us come for sure — or rather, that what is expected with horror will subside, and what is expected with hope will deceive.  Therefore, weigh your hopes and fears, and whenever there is no clear answer, decide in your favor — believe in what you think is best for yourself. But even if fear gathers more voices, you still lean in the other direction and stop worrying, thinking to yourself about the majority of people who are rushing in excitement, even if nothing bad happens to them, and probably does not threaten them. After all, everyone, having once lost his peace, is ready to give himself free rein and will not believe the fright of reality. No one will tell:Whoever says this is talking nonsense, he either invented everything himself or believed others. No, we surrender to the carriers of rumors and tremble before the unknown as before the inevitable, forgetting the measure so much that the slightest doubt turns into horror.But I am ashamed to talk to you like that and bring you such weak medicines. Let others talk: "Maybe it won not happen! You say, So what if it happens? Let is see who wins! Or maybe everything will be good for me and such a death will glorify my whole life. Hemlock finally made Socrates great. Snatch from Cato the sword that defended his freedom, and you will take away from him a considerable part of the glory."  However, I have been trying to persuade you for too long, although you do not need persuasion, but only a reminder. I'm not taking you away from your nature—you were born for what I'm talking about. But all the more must you multiply and beautify the good given to you.I am finishing this letter, I will only seal it with my seal, that is, I will instruct him to give you some beautiful saying. "The trouble with stupidity is also that it always starts life over again." Ponder for yourself, Lucilius, the best of men, into the meaning of the saying — and you will understand how disgusting is the frivolity of those who daily lay the foundations of a new life, who begin to hope anew before their death.  Look at everyone one by one — and you will immediately see old people who are preparing to hold positions, travel, trade with special zeal. What is more vile than an old man starting life over? I would not add the name of the one by whom these words were spoken if they were not so little known and belonged to those common sayings of Epicurus, which I allowed myself both to praise and to appropriate. God bless you.'''}]
def update(messages, role, content):
    messages.append({"role": role, "content": content})
    return messages

@dp.message_handler()
async def send (message: types.Message):
    
    update(messages, "user", message.text)
    response = openai.ChatCompletion.create(
    model="gpt-3.5-turbo",
    messages = messages
    )
    await message.answer (response['choices'][0]['message']['content'])
executor.start_polling (dp, skip_updates=True)  
    